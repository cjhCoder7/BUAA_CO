## P6 è¯¾ä¸‹æ„Ÿæƒ³â˜¹ï¸

### æ€è€ƒé¢˜

1. æˆ‘ä»¬ä½¿ç”¨æå‰åˆ†æ”¯åˆ¤æ–­çš„æ–¹æ³•å°½æ—©äº§ç”Ÿç»“æžœæ¥å‡å°‘å› ä¸ç¡®å®šè€Œå¸¦æ¥çš„å¼€é”€ï¼Œä½†å®žé™…ä¸Šè¿™ç§æ–¹æ³•å¹¶éžæ€»èƒ½æé«˜æ•ˆçŽ‡ï¼Œè¯·ä»Žæµæ°´çº¿å†’é™©çš„è§’åº¦æ€è€ƒå…¶åŽŸå› å¹¶ç»™å‡ºä¸€ä¸ªæŒ‡ä»¤åºåˆ—çš„ä¾‹å­ã€‚

> æå‰åˆ†æ”¯åˆ¤æ–­è™½ç„¶èƒ½å¤Ÿå‡å°‘æŽ§åˆ¶å†’é™©å¸¦æ¥çš„å¼€é”€ï¼Œä½†å…¶æ•ˆçŽ‡ä¾èµ–äºŽé¢„æµ‹çš„å‡†ç¡®æ€§å’Œæµæ°´çº¿ç»“æž„çš„è®¾è®¡ã€‚å¦‚æžœåˆ†æ”¯é¢„æµ‹é”™è¯¯ï¼Œä»ç„¶éœ€è¦æ¸…ç©ºæµæ°´çº¿ï¼Œä»Žè€Œé€ æˆæ€§èƒ½æŸå¤±ã€‚åŒæ—¶ï¼Œæå‰è®¡ç®—å¯èƒ½ä¼šå¯¼è‡´é¢å¤–çš„æ•°æ®å†’é™©é—®é¢˜ï¼Œä¾‹å¦‚ä¸Žå°šæœªå†™å›žçš„ç»“æžœç›¸å…³çš„ä¾èµ–å…³ç³»ã€‚
>
> **ç¤ºä¾‹æŒ‡ä»¤åºåˆ—**
> ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯èƒ½å¯¼è‡´é—®é¢˜çš„æŒ‡ä»¤åºåˆ—ï¼š
>
> ```assembly
> 1. BEQ R1, R2, Label  ; åˆ†æ”¯æ¡ä»¶åˆ¤æ–­
> 2. ADD R3, R4, R5     ; åˆ†æ”¯æœªç¡®è®¤å‰çš„åŽç»­æŒ‡ä»¤
> 3. Label: SUB R6, R7, R8 ; åˆ†æ”¯è·³è½¬ç›®æ ‡æŒ‡ä»¤
> ```
>
> åœ¨ä¸Šè¿°åºåˆ—ä¸­ï¼Œå¦‚æžœåˆ†æ”¯é¢„æµ‹é”™è¯¯ï¼ŒæŒ‡ä»¤ 2 çš„æ‰§è¡Œç»“æžœä¼šè¢«åºŸå¼ƒï¼Œæµªè´¹äº†è®¡ç®—èµ„æºã€‚æ­¤å¤–ï¼Œå¦‚æžœæŒ‡ä»¤ 3 çš„è¾“å…¥ä¾èµ–æŒ‡ä»¤ 2 çš„ç»“æžœï¼Œè¿˜å¯èƒ½å¯¼è‡´æ•°æ®å†’é™©é—®é¢˜ã€‚

2. å› ä¸ºå»¶è¿Ÿæ§½çš„å­˜åœ¨ï¼Œå¯¹äºŽ `jal` ç­‰éœ€è¦å°†æŒ‡ä»¤åœ°å€å†™å…¥å¯„å­˜å™¨çš„æŒ‡ä»¤ï¼Œè¦å†™å›ž `PC + 8`ï¼Œè¯·æ€è€ƒä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

> jal æŒ‡ä»¤éœ€è¦ä¿å­˜è¿”å›žåœ°å€ä»¥æ”¯æŒå­ç¨‹åºè°ƒç”¨å’Œè¿”å›žã€‚åœ¨æµæ°´çº¿æž¶æž„ä¸­ï¼Œç”±äºŽå»¶è¿Ÿæ§½çš„å­˜åœ¨ï¼Œjal çš„åŽç»­ä¸€æ¡æŒ‡ä»¤ä¼šåœ¨è·³è½¬å‰æ‰§è¡Œï¼Œå› æ­¤ä¿å­˜çš„è¿”å›žåœ°å€å¿…é¡»æ˜¯è·³è½¬æŒ‡ä»¤åŽä¸¤æ¡æŒ‡ä»¤çš„åœ°å€ï¼ˆå³ PC + 8ï¼‰ï¼Œä»¥ç¡®ä¿ç¨‹åºå¯ä»¥æ­£ç¡®è¿”å›žåˆ°è°ƒç”¨ç‚¹åŽçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚

3. æˆ‘ä»¬è¦æ±‚æ‰€æœ‰è½¬å‘æ•°æ®éƒ½æ¥æºäºŽæµæ°´å¯„å­˜å™¨è€Œä¸èƒ½æ˜¯åŠŸèƒ½éƒ¨ä»¶ï¼ˆå¦‚ DMã€ALUï¼‰ï¼Œè¯·æ€è€ƒä¸ºä»€ä¹ˆï¼Ÿ

> è½¬å‘æ•°æ®ç›´æŽ¥æ¥è‡ªæµæ°´å¯„å­˜å™¨è€ŒéžåŠŸèƒ½éƒ¨ä»¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ•°æ®ä¼ è¾“çš„å¤æ‚æ€§å’Œå»¶è¿Ÿ
> 1. åŠŸèƒ½éƒ¨ä»¶çš„è®¡ç®—ç»“æžœå¯èƒ½éœ€è¦é¢å¤–çš„å¤„ç†æ—¶é—´ï¼ˆå¦‚å†…å­˜è¯»å–å»¶è¿Ÿï¼‰ï¼Œå¢žåŠ äº†æ•°æ®è½¬å‘çš„å»¶è¿Ÿã€‚
> 2. æµæ°´å¯„å­˜å™¨å†…çš„æ•°æ®å·²ç»åœ¨ä¸Šä¸€é˜¶æ®µè®¡ç®—å®Œæˆä¸”ç¨³å®šï¼Œå¯ä»¥ä¿è¯åŠæ—¶æ€§å’Œä¸€è‡´æ€§ï¼Œå‡å°‘å†’é™©å‘ç”Ÿçš„æ¦‚çŽ‡ã€‚


4. æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ GPR å†…éƒ¨è½¬å‘ï¼Ÿè¯¥å¦‚ä½•å®žçŽ°ï¼Ÿ

>  GPRï¼ˆé€šç”¨å¯„å­˜å™¨ï¼‰å†…éƒ¨è½¬å‘çš„ç›®çš„æ˜¯å‡å°‘æ•°æ®å†’é™©å»¶è¿Ÿï¼Œæå‡æŒ‡ä»¤æ‰§è¡Œæ•ˆçŽ‡ã€‚åœ¨æŒ‡ä»¤ä¾èµ–å°šæœªå†™å›žçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡è½¬å‘æœºåˆ¶ç›´æŽ¥æä¾›æ•°æ®ï¼Œè€Œä¸æ˜¯ç­‰å¾…å¯„å­˜å™¨æ–‡ä»¶æ›´æ–°ã€‚

5. æˆ‘ä»¬è½¬å‘æ—¶æ•°æ®çš„éœ€æ±‚è€…å’Œä¾›ç»™è€…å¯èƒ½æ¥æºäºŽå“ªäº›ä½ç½®ï¼Ÿå…±æœ‰å“ªäº›è½¬å‘æ•°æ®é€šè·¯ï¼Ÿ

> **æ•°æ®æ¥æº**
> ä¾›ç»™è€…å¯ä»¥æ¥æºäºŽä»¥ä¸‹ä½ç½®ï¼š
>
> 1. EX/MEM é˜¶æ®µå¯„å­˜å™¨ï¼ˆALU ç»“æžœï¼‰ã€‚
> 2. MEM/WB é˜¶æ®µå¯„å­˜å™¨ï¼ˆå†…å­˜è¯»å–æˆ– ALU å†™å›žç»“æžœï¼‰ã€‚
>
> **æ•°æ®éœ€æ±‚è€…**
> éœ€æ±‚è€…ä¸»è¦æ¥è‡ªä»¥ä¸‹ä½ç½®ï¼š
>
> 1. ID é˜¶æ®µçš„æ“ä½œæ•°èŽ·å–ã€‚
> 2. EX é˜¶æ®µçš„æŒ‡ä»¤æ“ä½œæ•°ã€‚
>
> **æ•°æ®é€šè·¯**
> å…¸åž‹çš„è½¬å‘é€šè·¯åŒ…æ‹¬ï¼š
>
> 1. EX/MEM åˆ° EX è½¬å‘ã€‚
> 2. MEM/WB åˆ° EX è½¬å‘ã€‚
> 3. MEM/WB åˆ° ID è½¬å‘ã€‚

6. åœ¨è¯¾ä¸Šæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½ çŽ°åœºå®žçŽ°æ–°çš„æŒ‡ä»¤ï¼Œå¯¹äºŽè¿™äº›æ–°çš„æŒ‡ä»¤ï¼Œä½ å¯èƒ½éœ€è¦åœ¨åŽŸæœ‰çš„æ•°æ®é€šè·¯ä¸Šåšå“ªäº›æ‰©å±•æˆ–ä¿®æ”¹ï¼Ÿæç¤ºï¼šä½ å¯ä»¥å¯¹æŒ‡ä»¤è¿›è¡Œåˆ†ç±»ï¼Œæ€è€ƒæ¯ä¸€ç±»æŒ‡ä»¤å¯èƒ½ä¿®æ”¹æˆ–æ‰©å±•å“ªäº›ä½ç½®ã€‚

> **åˆ†ç±»ä¸Žä¿®æ”¹åˆ†æž**
>
> 1. ç®—æœ¯é€»è¾‘ç±»æŒ‡ä»¤
>    - æ‰©å±• ALU çš„åŠŸèƒ½æ¨¡å—ï¼Œä»¥æ”¯æŒæ–°çš„è¿ç®—ç±»åž‹ã€‚
>    - ä¿®æ”¹è¯‘ç å™¨ï¼Œå¢žåŠ å¯¹æ–°æ“ä½œç çš„è¯†åˆ«å’Œå¤„ç†ã€‚
> 2. è®¿å­˜ç±»æŒ‡ä»¤
>    - æ‰©å±• MEM é˜¶æ®µä»¥æ”¯æŒæ–°çš„å†…å­˜è®¿é—®æ–¹å¼ï¼ˆå¦‚å—åŠ è½½æˆ–æŒ‰ä½æ“ä½œï¼‰ã€‚
>    - ä¿®æ”¹åœ°å€ç”Ÿæˆé€»è¾‘ï¼Œæ”¯æŒæ›´å¤æ‚çš„åç§»è®¡ç®—ã€‚
> 3. åˆ†æ”¯ç±»æŒ‡ä»¤
>    - ä¿®æ”¹åˆ†æ”¯é¢„æµ‹å•å…ƒä»¥é€‚é…æ–°æŒ‡ä»¤çš„è·³è½¬æ¨¡å¼ã€‚
>    - æ‰©å±•åˆ†æ”¯åˆ¤æ–­é€»è¾‘ï¼Œç¡®ä¿å‡†ç¡®å¤„ç†æ¡ä»¶è·³è½¬ã€‚

7. ç®€è¦æè¿°ä½ çš„è¯‘ç å™¨æž¶æž„ï¼Œå¹¶æ€è€ƒè¯¥æž¶æž„çš„ä¼˜åŠ¿ä»¥åŠä¸è¶³ã€‚

>    è¯¦ç»†è¯·çœ‹è®¾è®¡å›¾

## P6 è¯¾ä¸Šæµ‹è¯•æ„Ÿæƒ³ðŸ˜‡